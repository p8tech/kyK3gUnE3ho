var MatchTracker=function(){"use strict";var $,configMap_headerMinHeight=90,configMap_lmtsMinHeight=175,stateMap={matchId:!1,widgetType:"matchheader",widgetId:!1,currentHeight:0,windowHeight:0,interval:!1},receiveMessage=function(message){var data=JSON.parse(message.data);switch(data.name){case"changeId":load(data.payload.matchId,data.payload.options);break;case"clear":clear();break;case"lmts":switch(data.payload.type){case"stream":$(".srlive-widgets-container").addClass("stream");break;default:$(".srlive-widgets-container").removeClass("stream")}returnCurrentHeight()}},ready=function(){window.parent.postMessage(JSON.stringify({name:"tracker",payload:{action:"tracker-ready",widgetType:stateMap.widgetType}}),"*")},returnCurrentHeight=function(){var height=$(".srlive-widgets-container").outerHeight(),minHeight="matchheader"===stateMap.widgetType?configMap_headerMinHeight:configMap_lmtsMinHeight;height<minHeight&&(height=minHeight),stateMap.currentHeight=height,window.parent.postMessage(JSON.stringify({name:"tracker",payload:{action:"adjust-height",height:height}}),"*")},loaded=function(e,type){clearInterval(stateMap.interval),stateMap.interval=window.setInterval(function(){if(!1===stateMap.matchId)return!1;var height=$(".srlive-widgets-container").outerHeight(),minHeight="matchheader"===stateMap.widgetType?configMap_headerMinHeight:configMap_lmtsMinHeight;height<minHeight&&(height=minHeight),stateMap.currentHeight===height&&$(window).height()===stateMap.windowHeight||(stateMap.currentHeight=height,stateMap.windowHeight=$(window).height(),window.parent.postMessage(JSON.stringify({name:"tracker",payload:{action:"tracker-loaded",widgetType:stateMap.widgetType,height:height}}),"*"))},500)},load=function(matchId,options){if(options=options||{},matchId!==stateMap.matchId||options.force){stateMap.matchId=matchId,!1!==stateMap.widgetId&&SRLive.removeWidget(stateMap.widgetId);var widget="widgets."+stateMap.widgetType,srliveParams={container:".srlive-widgets-container",showTitle:!1,matchId:stateMap.matchId};"matchheader"!==stateMap.widgetType&&(srliveParams.showScoreboard=!1,srliveParams.collapse_enabled=!1,srliveParams.showSidebar=!1,srliveParams.sidebarLayout="bottom","stream"===options.section&&(srliveParams.showPitch=!1,srliveParams.showMomentum=!1)),stateMap.widgetId=SRLive.addWidget(widget,srliveParams),loaded()}},clear=function(){stateMap.matchId=!1,!1!==stateMap.widgetId&&(SRLive.removeWidget(stateMap.widgetId),window.parent.postMessage(JSON.stringify({name:"tracker",payload:{action:"tracker-cleared",widgetType:stateMap.widgetType,height:0}}),"*"))};return{init:function(){window.location.hash.length&&(stateMap.widgetType=window.location.hash.substr(1)),$=SRjQuery,window.addEventListener("message",receiveMessage,!1),ready()},load:load,ready:ready,loaded:loaded,stateMap:stateMap}}();